define(["angular","app","qrcode","qrcodeUTF8"],function(a,b){b.controller("CollectCtrl",["$scope","$rootScope","$http","$window",function(a,b,c,d){var e=b.proxyUrl,f=b.globals.userID,g=e+"/userweb/"+f+"/favorites",h=a.user={};h.allcolData=[];var i=function(b,d){c({url:g,method:"GET",params:{limit:d,offset:b}}).success(function(b){h.allcolData=h.allcolData.concat(b.goods),a.goodslist=b.goods=h.allcolData,a.toggle1=function(b,d){a.goodslist[b].ifshow=a.goodslist[b].ifshow?!1:!0,c["delete"](e+"/user/goods/concern?gid="+d).success(function(a){})},a.toggle2=function(b,d){a.goodslist[b].ifshow=a.goodslist[b].ifshow?!1:!0,c.post(e+"/user/goods/concern?gid="+d).success(function(a){})},a.sqq=function(b){var c={url:"https://www.baidu.com/",desc:"",title:"",summary:"",pics:"",flash:"",site:"",style:"202",width:24,height:24},d=[];for(var e in c)d.push(e+"="+encodeURIComponent(c[e]||""));a.sqqhref="http://connect.qq.com/widget/shareqq/index.html?"+d.join("&")},a.tsina=function(b){var c={url:"https://www.baidu.com/",type:"3",count:"0",appkey:"",title:"",pic:"",ralateUid:"",language:"zh_cn",rnd:(new Date).valueOf()},d=[];for(var e in c)d.push(e+"="+encodeURIComponent(c[e]||""));a.tsinahref="http://service.weibo.com/share/share.php?"+d.join("&")},a.qzone=function(b){var c={url:location.href,showcount:"0",desc:"",summary:"",title:"",site:"",pics:"",style:"203",width:98,height:22},d=[];for(var e in c)d.push(e+"="+encodeURIComponent(c[e]||""));a.qzonehref="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?"+d.join("&")}})};i(0,10);var j=20,k=50,l=1,m=0;d.onscroll=function(){var a=$(window).scrollTop(),b=$(document).height(),c=$(window).height();if(m=parseFloat(c)+parseFloat(a),m>=b-k&&0!=h.allcolData.length&&l!=j){var d=10*l;i(d,10),l++}}}])});