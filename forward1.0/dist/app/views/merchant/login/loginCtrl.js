"use strict";define(["angular","app","md5","services/authorization","services/rememberMe"],function(a,b){b.controller("mtLoginCtrl",["$scope","$rootScope","$location","authorization","remember",function(a,b,c,d,e){document.title="喵喵熊商家登录";var f=b.proxyUrl+"/merchant/login",g=0,h={},i={},j=a.userInfo={},k=a._alert={};a.logSucceed=!0,a.remember=!1;var l={type:"danger"},m="用户名或密码错误!",n="请先退出当前登录用户,重新登录";k.alerts=[],k.alerts.push(l),k.closeAlert=function(a){k.alerts.splice(a,1)},a.changeLoginTab=function(){console.log("cus"),c.path("/customer/login")},j.login=function(){if(e.get("globals"))return console.log("globalsssssssssssss"),a.logSucceed=!1,l.msg=n,void(0==k.alerts.length&&k.alerts.push(l));var o=function(f){console.log("post success"),a.logSucceed=!0,a.storeInfo=f,f.is_success?(console.log("usernameeeee,"+d._credentials.account),a.logSucceed=!0,a.storeInfo=f,a.remember&&(g=30),i={shop_id:a.storeInfo.shop_id,merchant_service_status:f.merchant_service_status,accType:"mt",username:j.name,password:j.passwd},d.setCredentials(i,g),b.globals=e.get("globals")||{},c.path("/merchant/account")):(console.log("failed,"+f.error_code),a.logSucceed=!1,l.msg=m),0==k.alerts.length&&k.alerts.push(l)},p=function(b){a.err=b};h.account=j.name,h.password=j.passwd,h.type=5,d.login(f,h).success(o).error(p)}}])});